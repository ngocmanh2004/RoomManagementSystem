<header class="main-header">
  <div class="container">
    <a routerLink="/" class="logo">TechRoom</a>
    
    <nav>
      <ul>
        <li><a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Trang chủ</a></li>
        <li><a routerLink="/rooms" routerLinkActive="active">Phòng trọ</a></li>
        <li><a routerLink="/about" routerLinkActive="active">Giới thiệu</a></li>
        <li><a routerLink="/contact" routerLinkActive="active">Liên hệ</a></li>
      </ul>
    </nav>

    <div class="user-actions">
      <ng-container *ngIf="!isLoggedIn">
        <a routerLink="/login" class="btn btn-secondary">
          <i class="fa fa-sign-in-alt"></i> Đăng nhập
        </a>
        <a routerLink="/register" class="btn btn-primary">
          <i class="fa fa-user-plus"></i> Đăng ký
        </a>
      </ng-container>

      <ng-container *ngIf="isLoggedIn && currentUser">
        <button
          type="button"
          class="notification-btn"
          (click)="goToNotification()"
          *ngIf="currentUser && (currentUser.role === 1 || currentUser.role === 2)"
        >
          <i class="fa fa-bell"></i>

          <span class="notification-badge" *ngIf="notificationCount > 0">
            {{ notificationCount }}
          </span>
        </button>

        <div class="user-dropdown">
          <button class="user-btn">
            <i class="fa fa-user-circle"></i>
            <span class="user-name">{{ currentUser.fullName }}</span>
            <i class="fa fa-caret-down"></i>
          </button>
          
          <ul class="dropdown-menu">
            <!-- ADMIN (0) hoặc LANDLORD (1) mới có Dashboard -->
            <ng-container *ngIf="currentUser.role === 0 || currentUser.role === 1">
              <li>
                <a [routerLink]="getDashboardLink()">
                  <i class="fa fa-tachometer-alt"></i>
                  Dashboard {{ getRoleName(currentUser.role) }}
                </a>
              </li>
              <li class="divider"></li>
            </ng-container>

            <!-- TENANT (2) hiển thị Đăng ký chủ trọ -->
            <ng-container *ngIf="currentUser.role === 2">
              <li>
                <a routerLink="/register-landlord">
                  <i class="fa fa-user-tie"></i> Đăng ký chủ trọ
                </a>
              </li>
              <li class="divider"></li>
              <li>
                <a routerLink="/contract-detail">
                  <i class="fa fa-user-tie"></i> Hợp đồng
                </a>
              </li>
              <li class="divider"></li>
              
              <li class="divider"></li>
            </ng-container>

            <li>
              <a [routerLink]="['/tenant-profile']">
                <i class="fa fa-user"></i> Thông tin cá nhân
              </a>
            </li>

            <ng-container *ngIf="currentUser.role === 0">
              <li>
                <a [routerLink]="['/admin/users']">
                  <i class="fa fa-users"></i> Quản lý người dùng
                </a>
              </li>
            </ng-container>

            <ng-container *ngIf="currentUser.role === 1">
              <li>
                <a [routerLink]="['/landlord/rooms']">
                  <i class="fa fa-building"></i> Quản lý phòng trọ
                </a>
              </li>

            </ng-container>

            <ng-container *ngIf="currentUser.role === 2">

              <li>
                <a [routerLink]="['/tenant/bookings']">
                  <i class="fa fa-calendar-check"></i> Đặt phòng của tôi
                </a>
              </li>
            </ng-container>

            <li class="divider"></li>

            <li>
              <a (click)="logout()" class="logout-btn">
                <i class="fa fa-sign-out-alt"></i> Đăng xuất
              </a>
            </li>
          </ul>
        </div>
      </ng-container>
    </div>
  </div>
</header>