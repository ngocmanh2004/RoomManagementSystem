<section class="hero-section">
    <div class="hero-content">
        <h1>Tìm phòng trọ lý tưởng cho cuộc sống của bạn</h1>
        <p>Hệ thống quản lý phòng trọ thông minh - Một nơi cho chủ trọ và người thuê kết nối cách tin cậy, hiệu quả và
            chuyên nghiệp</p>
        <div class="hero-buttons">
            <button class="btn btn-primary btn-large"><i class="fa-solid fa-magnifying-glass"></i> Tìm phòng
                ngay</button>
            <button class="btn btn-outline btn-large">Quản lý tin của bạn</button>
        </div>
    </div>
</section>

<section class="search-section container">
    <div class="search-box">
        <h3>Tìm kiếm phòng trọ phù hợp</h3>
        <form class="search-form" (submit)="onSearch($event)">

            <div class="form-group">
                <label for="province">Tỉnh/Thành phố</label>
                <select id="province" [(ngModel)]="selectedProvinceCode" (change)="onProvinceChange()" name="province">
                    <option value="">Chọn Tỉnh/Thành</option>
                    <option *ngFor="let province of provinces" [value]="province.code">
                        {{ province.name }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="district">Quận/Huyện</label>
                <select id="district" [(ngModel)]="selectedDistrictCode" name="district"
                    [disabled]="districts.length === 0">
                    <option value="">Chọn Quận/Huyện</option>
                    <option *ngFor="let district of districts" [value]="district.code">
                        {{ district.name }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="price">Chọn giá</label>
                <select id="price" [(ngModel)]="selectedPrice" name="price">
                    <option value="">Chọn mức giá</option>
                    <option value="0-1500000">Dưới 1.5 triệu</option>
                    <option value="1500000-3000000">1.5 - 3 triệu</option>
                    <option value="3000000-5000000">3 - 5 triệu</option>
                    <option value="5000000-9999999">Trên 5 triệu</option>
                </select>
            </div>
            <div class="form-group">
                <label for="acreage">Diện tích</label>
                <select id="acreage" [(ngModel)]="selectedAcreage" name="acreage">
                    <option value="">Chọn diện tích</option>
                    <option value="0-15">Dưới 15 m²</option>
                    <option value="15-25">15 - 25 m²</option>
                    <option value="25-40">25 - 40 m²</option>
                    <option value="40-999">Trên 40 m²</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary">
                <i class="fa-solid fa-magnifying-glass"></i> Tìm kiếm
            </button>

            <button type="button" class="btn btn-outline-primary" (click)="clearFilters()">
                <i class="fa-solid fa-rotate-right"></i> Làm mới
            </button>

        </form>
    </div>
</section>

<section class="main-content container">
    <aside class="filter-sidebar">
        <div class="filter-header">
            <h4><i class="fa-solid fa-filter"></i> Bộ lọc</h4>
            <a href="#" class="clear-filter" (click)="clearFilters(); $event.preventDefault()">Xóa tất cả</a>
        </div>

        <form (ngSubmit)="applyFilters()" class="filter-form">
            <div class="filter-group">
                <label>Khoảng giá (triệu VNĐ)</label>
                <div class="price-range">
                    <input type="number" [(ngModel)]="minPrice" name="minPrice" placeholder="Từ" min="0" />
                    <input type="number" [(ngModel)]="maxPrice" name="maxPrice" placeholder="Đến" min="0" />
                </div>
            </div>

            <div class="filter-group">
                <label>Diện tích</label>
                <select [(ngModel)]="selectedAcreage" name="selectedAcreage_sidebar">
                    <option value="">Chọn diện tích</option>
                    <option *ngFor="let size of areaOptions" [value]="size">{{ size }} m²</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Loại phòng</label>
                <select [(ngModel)]="selectedType" name="selectedType_sidebar">
                    <option value="">Chọn loại phòng</option>
                    <option *ngFor="let type of roomTypes" [value]="type">{{ type }}</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Tiện nghi</label>
                <div class="checkbox-list">
                    <label *ngFor="let amenity of amenities">
                        <input type="checkbox" [(ngModel)]="amenity.selected" [name]="'amenity_' + amenity.id" />
                        <span class="checkmark"></span>
                        <span class="label-text">{{ amenity.name }}</span>
                    </label>
                </div>
            </div>

            <button class="btn btn-primary btn-full-width" type="submit">
                <i class="fa-solid fa-magnifying-glass"></i> Áp dụng bộ lọc
            </button>
        </form>
    </aside>

    <div class="room-list-container">
        <div class="list-header">
            <h3>Phòng trọ nổi bật ({{ rooms.length }})</h3>
            <select [(ngModel)]="sortOption" (change)="onSortChange($event)">
                <option>Mặc định</option>
                <option>Giá tăng dần</option>
                <option>Giá giảm dần</option>
            </select>
        </div>

        <div class="room-list" *ngIf="rooms.length > 0">
            <app-room-card *ngFor="let room of rooms" [room]="room"></app-room-card>
        </div>

        <div class="no-rooms" *ngIf="rooms.length === 0">
            <i class="fa-solid fa-house-circle-xmark"></i>
            <p>Không tìm thấy phòng trọ phù hợp</p>
            <button class="btn btn-outline" (click)="clearFilters()">
                Xóa bộ lọc
            </button>
        </div>

        <div class="view-more" *ngIf="rooms.length > 0">
            <button class="btn btn-outline">Xem thêm phòng trọ</button>
        </div>
    </div>
</section>