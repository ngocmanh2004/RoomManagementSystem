<div class="reviews-section">
  
  <!-- Section Header -->
  <div class="section-header">
    <h2 class="section-title">ฤรกnh giรก phรฒng</h2>
    <button 
      *ngIf="isLoggedIn"
      (click)="openReviewForm()"
      class="btn-primary">
      โ๏ธ Viแบฟt ฤรกnh giรก
    </button>
    <button 
      *ngIf="!isLoggedIn"
      disabled
      class="btn-disabled">
      ๐ ฤฤng nhแบญp ฤแป ฤรกnh giรก
    </button>
  </div>

  <!-- Form tแบกo/edit ฤรกnh giรก -->
  <div *ngIf="showForm && isLoggedIn" class="form-wrapper">
    <!-- โ DEBUG: log roomId -->
    <div style="background: #fff3cd; padding: 10px; margin-bottom: 10px; border-radius: 4px;">
      <small>๐ Debug: roomId = {{ roomId }}</small>
    </div>
    
    <app-review-form 
      [roomId]="roomId"
      [editingReview]="editingReview"
      (submit)="onFormSubmit($event)"
      (cancel)="onFormCancel()">
    </app-review-form>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading-state">
    <p>โณ ฤang tแบฃi ฤรกnh giรก...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage && !isLoading" class="error-state">
    <p class="error-message">โ {{ errorMessage }}</p>
  </div>

  <!-- Reviews List -->
  <div *ngIf="reviews.length > 0 && !isLoading" class="reviews-list">
    <app-review-card 
      *ngFor="let review of reviews; trackBy: trackByReviewId"
      [review]="review"
      [isOwner]="isLoggedIn && review.canEdit"
      (onEdit)="onEditReview(review)"
      (onDelete)="onDeleteReview(review.id)">
    </app-review-card>
  </div>

  <!-- No Reviews -->
  <div *ngIf="reviews.length === 0 && !isLoading && !errorMessage" class="no-reviews-state">
    <p>๐ญ Chฦฐa cรณ ฤรกnh giรก nรo cho phรฒng nรy</p>
  </div>

  <!-- Pagination -->
  <div *ngIf="totalPages > 1 && !isLoading" class="pagination">
    <button 
      *ngFor="let pageNum of getPaginationPages()"
      [class.active]="pageNum === currentPage"
      (click)="loadReviews(pageNum)"
      class="pagination-btn">
      {{ pageNum + 1 }}
    </button>
  </div>

</div>