<div class="register-landlord-container">
  <div class="header">
    <button class="btn-back" (click)="goBack()">‚Üê Quay l·∫°i</button>
    <h1>ƒêƒÉng k√Ω tr·ªü th√†nh Ch·ªß tr·ªç</h1>
    <p class="subtitle">Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin ƒë·ªÉ g·ª≠i y√™u c·∫ßu</p>
  </div>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
    <div class="form-section">
      <h2>Th√¥ng tin c√° nh√¢n</h2>

      <!-- CCCD - readonly n·∫øu ƒë√£ c√≥ t·ª´ tenant, cho ph√©p nh·∫≠p n·∫øu ch∆∞a c√≥ -->
      <div class="form-group">
        <label>CCCD/CMND <span class="required">*</span></label>
        <input 
          type="text" 
          formControlName="cccd"
          class="form-control"
          placeholder="Nh·∫≠p s·ªë CCCD/CMND (9-12 s·ªë)"
          [attr.readonly]="hasCccdFromTenant ? true : null"
          [ngStyle]="{
            'background-color': hasCccdFromTenant ? '#f5f5f5' : 'white',
            'cursor': hasCccdFromTenant ? 'not-allowed' : 'text'
          }"
        />
        <small *ngIf="hasCccdFromTenant" class="form-text" style="color: #666; font-size: 12px; margin-top: 4px; display: block;">
          ‚ÑπÔ∏è Th√¥ng tin n√†y ƒë∆∞·ª£c l·∫•y t·ª´ h·ªì s∆° kh√°ch thu√™ c·ªßa b·∫°n
        </small>
        <span *ngIf="registerForm.get('cccd')?.invalid && registerForm.get('cccd')?.touched" 
              class="error-text">
          Vui l√≤ng nh·∫≠p s·ªë CCCD h·ª£p l·ªá (9-12 s·ªë)
        </span>
      </div>

      <div class="form-group">
        <label>T·ªânh/Th√†nh ph·ªë</label>
        <select 
          formControlName="provinceCode"
          class="form-control"
          (change)="onProvinceChange($event)">
          <option [ngValue]="null">-- Ch·ªçn T·ªânh/Th√†nh --</option>
          <option *ngFor="let province of provinces" [value]="province.code">
            {{ province.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Qu·∫≠n/Huy·ªán</label>
        <select 
          formControlName="districtCode"
          class="form-control"
          [disabled]="!districts.length">
          <option [ngValue]="null">-- Ch·ªçn Qu·∫≠n/Huy·ªán --</option>
          <option *ngFor="let district of districts" [value]="district.code">
            {{ district.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>ƒê·ªãa ch·ªâ chi ti·∫øt <span class="required">*</span></label>
        <textarea 
          formControlName="address"
          class="form-control"
          rows="3"
          placeholder="Nh·∫≠p s·ªë nh√†, t√™n ƒë∆∞·ªùng, ph∆∞·ªùng/x√£"
        ></textarea>
        <span *ngIf="registerForm.get('address')?.invalid && registerForm.get('address')?.touched" 
              class="error-text">
          Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ
        </span>
      </div>

      <div class="form-group">
        <label>S·ªë ph√≤ng d·ª± ki·∫øn qu·∫£n l√Ω <span class="required">*</span></label>
        <input 
          type="number" 
          formControlName="expectedRoomCount"
          class="form-control"
          placeholder="Nh·∫≠p s·ªë ph√≤ng"
          min="1"
        />
        <span *ngIf="registerForm.get('expectedRoomCount')?.invalid && registerForm.get('expectedRoomCount')?.touched" 
              class="error-text">
          Vui l√≤ng nh·∫≠p s·ªë ph√≤ng (t·ªëi thi·ªÉu 1)
        </span>
      </div>
    </div>

    <div class="form-section">
      <h2>T√†i li·ªáu ƒë√≠nh k√®m</h2>

      <div class="form-group">
        <label>·∫¢nh CCCD m·∫∑t tr∆∞·ªõc <span class="required">*</span></label>
        <div class="file-upload-area">
          <input 
            type="file" 
            accept="image/*"
            (change)="onFileChange($event, 'frontImage')"
            #frontImageInput
            style="display: none"
          />
          <button type="button" class="btn-upload" (click)="frontImageInput.click()">
            üìÅ Ch·ªçn file
          </button>
          <div *ngIf="frontImagePreview" class="image-preview">
            <img [src]="frontImagePreview" alt="Front" />
          </div>
        </div>
        <span *ngIf="registerForm.get('frontImage')?.invalid && registerForm.get('frontImage')?.touched" 
              class="error-text">
          Vui l√≤ng t·∫£i ·∫£nh m·∫∑t tr∆∞·ªõc CCCD
        </span>
      </div>

      <div class="form-group">
        <label>·∫¢nh CCCD m·∫∑t sau <span class="required">*</span></label>
        <div class="file-upload-area">
          <input 
            type="file" 
            accept="image/*"
            (change)="onFileChange($event, 'backImage')"
            #backImageInput
            style="display: none"
          />
          <button type="button" class="btn-upload" (click)="backImageInput.click()">
            üìÅ Ch·ªçn file
          </button>
          <div *ngIf="backImagePreview" class="image-preview">
            <img [src]="backImagePreview" alt="Back" />
          </div>
        </div>
        <span *ngIf="registerForm.get('backImage')?.invalid && registerForm.get('backImage')?.touched" 
              class="error-text">
          Vui l√≤ng t·∫£i ·∫£nh m·∫∑t sau CCCD
        </span>
      </div>

      <div class="form-group">
        <label>Gi·∫•y ph√©p kinh doanh <span class="required">*</span></label>
        <div class="file-upload-area">
          <input 
            type="file" 
            accept="image/*,application/pdf"
            (change)="onFileChange($event, 'businessLicense')"
            #businessLicenseInput
            style="display: none"
          />
          <button type="button" class="btn-upload" (click)="businessLicenseInput.click()">
            üìÅ Ch·ªçn file
          </button>
          <div *ngIf="businessLicensePreview" class="image-preview">
            <img [src]="businessLicensePreview" alt="License" />
          </div>
        </div>
        <span *ngIf="registerForm.get('businessLicense')?.invalid && registerForm.get('businessLicense')?.touched" 
              class="error-text">
          Vui l√≤ng t·∫£i gi·∫•y ph√©p kinh doanh
        </span>
      </div>
    </div>

    <div class="form-actions">
      <button 
        type="submit" 
        class="btn-submit"
        [disabled]="registerForm.invalid || submitting"
      >
        {{ submitting ? 'ƒêang g·ª≠i...' : 'G·ª≠i y√™u c·∫ßu' }}
      </button>
      
      <button 
        type="button" 
        class="btn-cancel"
        (click)="goBack()"
        [disabled]="submitting"
      >
        H·ªßy
      </button>
    </div>
  </form>
</div>